<!DOCTYPE HTML>

<!-- 
     HTML for Upward test runner.
     Modify run.js to configure tests.
-->

<html>

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Upward Test Runner</title>
    
    <link rel="icon" type="image/png" href="../ass/img/upward.png"/>

    <!-- testing libraries -->
    <script src="http://chaijs.com/chai.js"></script>  
    <script src="http://cdnjs.cloudflare.com/ajax/libs/sinon.js/1.7.3/sinon.js"></script>
    
    <!-- traceur -->
    <script src="https://google.github.io/traceur-compiler/bin/traceur.js"></script>
    <script src="https://google.github.io/traceur-compiler/src/bootstrap.js"></script>
    <script>traceur.options.experimental = true;</script>
    
    <!-- livereload -->
    <script>
      document.write('<' + 'script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')
    </script>
  </head>

  <body>
    <script type="module">
      import {U} from '../src/Upw';
      import '../src/Kee';
      import {valueize} from '../src/Obj';      

      //var a = U(5);
      //onsole.log(a);
      //Object.observe(a, console.log.bind(console), ['update', 'add', 'upward']);
      //a.set(6);
      //console.log(a);
      //console.log(a.valueOf());

      //var b = U({a:1})
      //console.log("upwardable is", b);
      //console.log("valueof upwardable is", b.valueOf());
      //console.log("prop is", b.a);
      //console.log("valueof prop is", b.a.valueOf());
      //Object.observe(b.a, function(changes) { console.log('event on b.a', changes); }, ['upward']);
      //Object.observe(b, function(changes) { console.log('event on b', changes); }, ['upward', 'delete', 'add', 'update']);
      //b.a = 2;

      var a =['x', 'y'];
      var b = U(a);
      var result = b.join().log()
      console.log("result is", valueize(result));
      Object.observe(b, function(changes) { console.log("changes to b", changes); }, ['upward']);
      b[0] = 'z';
      console.log("new b[0] is", b[0], valueize(b[0]));
    </script>
  </body>

</html>
